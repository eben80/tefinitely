<!DOCTYPE html>
<html lang="fr">
<head>
<base href="/">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TEF Canada Training</title>
<link rel="icon" href="img/favicon/favicon.ico" sizes="any">
<link rel="icon" href="img/favicon/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="img/favicon/apple-touch-icon.png">
<link rel="manifest" href="img/favicon/site.webmanifest">
<link rel="stylesheet" href="css/toast.css">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<style>
  .logo {
    width: 100%;
    max-width: 500px;
    margin: 1rem 0 2rem 0;
  }
  body {
    font-family: Arial, sans-serif;
    margin: 2rem;
    background: #f5f0ea;
  }
  h1 {
    margin-bottom: 1rem;
    color: #333;
  }
  @media (max-width: 640px) {
    .landing-page .hero h1 {
        font-size: 2.5rem;
    }
    .landing-page .cta-buttons a {
        display: block;
        margin: 0 0 1rem 0;
    }
    .landing-page .hero {
        padding: 2rem 0;
    }
    .landing-page .features, .landing-page .sample-section {
        padding: 2rem 0;
        margin-bottom: 2rem;
    }
    body {
      margin: 1rem;
    }
    h1 {
      font-size: 1.5rem;
    }
  }

  .subscription-prompt {
    max-width: 600px;
    margin: 4rem auto;
    background: #fff;
    padding: 2rem 2.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
  }
  .subscription-prompt h2 {
    font-size: 1.8rem;
    color: #004d99;
    margin-bottom: 1rem;
  }
  .subscription-prompt .lead {
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 2rem;
  }
  .subscription-prompt .benefits-list {
    list-style-type: none;
    padding: 0;
    margin: 0 auto 2rem auto;
    text-align: left;
    max-width: 350px;
  }
  .subscription-prompt .benefits-list li {
    margin-bottom: 1rem;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
  }
  .subscription-prompt .benefits-list li::before {
    content: '✓';
    color: #28a745;
    font-size: 1.5rem;
    margin-right: 1rem;
  }

  .landing-page .sample-section {
    padding: 3rem 0;
  }
  .landing-page .sample-section h2 {
    font-size: 2.5rem;
    margin-bottom: 2rem;
  }
  #sample-nav button {
      padding: 0.4rem 1rem;
      margin: 1rem 0.5rem 0 0.5rem;
      font-size: 1rem;
  }
  #paypal-button-container {
      max-width: 300px;
      margin: 1rem auto 0 auto;
  }
</style>
<script src="js/paypal-util.js"></script>
</head>
<body>
<header>
    <a href="index.html"><img src="img/top_logo_light.png" alt="TEFinitely Logo" class="logo"></a>
</header>
<div id="toast-container"></div>
<nav class="main-nav" id="user-status" style="display: none;">
    <button class="hamburger-menu" id="hamburger-menu" aria-label="Toggle menu" aria-expanded="false">
        <i class="bi bi-list"></i>
    </button>
    <div class="nav-content" id="nav-content">
        <div class="nav-links">
            <div class="dropdown">
                <a href="oral_expression.php" class="dropbtn">Oral Expression</a>
                <div class="dropdown-content">
                    <a href="oral_expression_section_a.php">Flashcards</a>
                    <a href="practise/section_a/index.php">Section A Practice</a>
                    <a href="practise/section_b/index.php">Section B Practice</a>
                </div>
            </div>
            <a href="training.php">Phased Training</a>
            <a href="profile.php">Profile</a>
            <a id="admin-link" href="admin.php" style="display: none;">Admin Portal</a>
        </div>
        <div class="nav-user">
            <span id="first-name-display"></span>
            <button id="logoutBtn">Logout</button>
        </div>
    </div>
</nav>

<div id="auth-container" style="display: none;">
    <div id="login-prompt" class="landing-page" style="display: none;">
        <nav class="landing-nav" id="landing-nav">
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="mailto:support@tefinitely.com">Contact</a>
            </div>
            <div class="nav-auth">
                <a href="login.html" class="btn-login" id="landing-login-btn">Login</a>
            </div>
        </nav>

        <section class="hero">
            <h1>Your Guide to Succeeding on the TEF Canada Exam</h1>
            <p>Everything you need to succeed on the TEF Canada exam, all in one place. Go from hesitant to fluent with our unique, phased training system.</p>
            <div class="cta-buttons">
                <a href="register.html">Get Started Now</a>
            </div>
        </section>

        <section id="features" class="features">
            <h2>Master the TEF Canada Exam</h2>
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon"><i class="bi bi-robot"></i></div>
                    <h3>AI Oral Practice</h3>
                    <p>Engage in realistic Section A & B simulations with real-time AI feedback and suggestions.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="bi bi-diagram-3"></i></div>
                    <h3>5-Phase Training</h3>
                    <p>Follow a structured curriculum from Shadowing to Script Writing to build confidence.</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon"><i class="bi bi-card-text"></i></div>
                    <h3>Smart Flashcards</h3>
                    <p>Master essential phrases with audio pronunciation and topic-based categorization.</p>
                </div>
                 <div class="feature-item">
                    <div class="feature-icon"><i class="bi bi-graph-up-arrow"></i></div>
                    <h3>Progress Tracking</h3>
                    <p>Monitor your performance and see your improvement as you prepare for test day.</p>
                </div>
            </div>
        </section>

        <section class="sample-section">
            <h2>Try a Sample</h2>
            <div id="sample-flashcard-container">
                <div class="flashcard">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <p id="sample-english"></p>
                        </div>
                        <div class="flashcard-back">
                            <p id="sample-french"></p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="sample-nav">
                <button id="sample-first-btn">&lt;&lt;</button>
                <button id="sample-prev-btn" disabled>Previous</button>
                <button id="sample-flip-btn">Flip</button>
                <button id="sample-play-btn">Play Phrase</button>
                <button id="sample-next-btn">Next</button>
            </div>
            <div id="sample-pagination-display" style="text-align: center; margin-top: 1rem; font-weight: bold;">
                <span id="sample-current-card"></span> / <span id="sample-total-cards"></span>
            </div>
        </section>


    </div>

    <div id="subscription-prompt" class="subscription-prompt" style="display: none;">
        <h2>Unlock Your Full Potential</h2>
        <p class="lead">Your subscription is inactive. Subscribe now to get full access to all our training features.</p>
        <ul class="benefits-list">
            <li>Access all training modules</li>
            <li>Practice with unlimited phrases</li>
            <li>Track your progress</li>
            <li>Cancel anytime</li>
        </ul>
        <div id="paypal-button-container"></div>
    </div>

    <footer id="landing-footer" class="landing-footer" style="display: none;">
        <div class="footer-grid">
                <div class="footer-column">
                    <img src="img/top_logo_light.png" alt="TEFinitely Logo" class="footer-logo">
                    <p>Your guide to succeeding on the TEF Canada exam.</p>
                </div>
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#features">Features</a></li>
                        <li><a href="register.html">Register</a></li>
                        <li><a href="login.html">Login</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact</h4>
                    <p>Email us at<br><a href="mailto:support@tefinitely.com">support@tefinitely.com</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2026 tefinitely.com | All Rights Reserved</p>
            </div>
        </footer>
</div>

<script src="js/toast.js"></script>
<script src="js/auth.js"></script>
<script src="js/nav.js"></script>
<script>
function speakFrench(text, rate) {
    const utterance = new SpeechSynthesisUtterance(text);

    const setVoiceAndSpeak = () => {
        const voices = speechSynthesis.getVoices();
        let frenchVoice;

        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        if (isIOS) {
            frenchVoice = voices.find(voice => voice.name === 'Thomas' && voice.lang === 'fr-FR');
        }

        if (!frenchVoice) {
          frenchVoice = voices.find(voice => voice.lang === 'fr-FR');
        }

        if (frenchVoice) {
          utterance.voice = frenchVoice;
        }

        utterance.lang = 'fr-FR';
        utterance.rate = rate;
        speechSynthesis.speak(utterance);
    };

    if (speechSynthesis.getVoices().length > 0) {
        setVoiceAndSpeak();
    } else {
        speechSynthesis.onvoiceschanged = setVoiceAndSpeak;
    }
}

function initializeSampleFlashcard() {
    const container = document.querySelector('.sample-section');
    if (!container) return;

    const phrases = [
        { english: 'Hello, I am calling about the advertisement.', french: 'Bonjour, je vous appelle au sujet de l’annonce.' },
        { english: 'Could you give me more information?', french: 'Pourriez-vous me donner plus d’informations ?' },
        { english: 'What are the opening hours?', french: 'Quels sont les horaires d’ouverture ?' }
    ];
    let currentIndex = 0;

    const englishEl = container.querySelector('#sample-english');
    const frenchEl = container.querySelector('#sample-french');
    const flashcardEl = container.querySelector('.flashcard');
    const prevBtn = container.querySelector('#sample-prev-btn');
    const nextBtn = container.querySelector('#sample-next-btn');
    const flipBtn = container.querySelector('#sample-flip-btn');
    const playBtn = container.querySelector('#sample-play-btn');
    const firstBtn = container.querySelector('#sample-first-btn');
    const currentCardEl = container.querySelector('#sample-current-card');
    const totalCardsEl = container.querySelector('#sample-total-cards');

    function display(index) {
        currentIndex = index;
        const phrase = phrases[index];
        englishEl.textContent = phrase.english;
        frenchEl.textContent = phrase.french;
        flashcardEl.classList.remove('is-flipped');
        currentCardEl.textContent = currentIndex + 1;
        totalCardsEl.textContent = phrases.length;
        prevBtn.disabled = currentIndex === 0;
        firstBtn.disabled = currentIndex === 0;
        nextBtn.disabled = currentIndex >= phrases.length - 1;
    }

    flipBtn.addEventListener('click', (e) => { e.stopPropagation(); flashcardEl.classList.toggle('is-flipped'); });
    flashcardEl.addEventListener('click', () => flashcardEl.classList.toggle('is-flipped'));
    playBtn.addEventListener('click', () => speakFrench(phrases[currentIndex].french, 1.0));
    firstBtn.addEventListener('click', () => display(0));

    prevBtn.addEventListener('click', () => {
        if (currentIndex > 0) {
            flashcardEl.classList.add('slide-out-right');
            setTimeout(() => {
                display(currentIndex - 1);
                flashcardEl.classList.remove('slide-out-right');
            }, 300);
        }
    });

    nextBtn.addEventListener('click', () => {
        if (currentIndex < phrases.length - 1) {
            flashcardEl.classList.add('slide-out-left');
            setTimeout(() => {
                display(currentIndex + 1);
                flashcardEl.classList.remove('slide-out-left');
            }, 300);
        }
    });

    let touchstartX = 0;
    flashcardEl.addEventListener('touchstart', e => { touchstartX = e.changedTouches[0].screenX; });
    flashcardEl.addEventListener('touchend', e => {
        const touchendX = e.changedTouches[0].screenX;
        if (Math.abs(touchendX - touchstartX) > 50) {
            if (touchendX < touchstartX) nextBtn.click();
            else prevBtn.click();
        }
    });

    display(0);

    // Auto-flip when flip button is scrolled into view
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Only flip if not already flipped and not already animating
                if (!flashcardEl.classList.contains('is-flipped') && !flashcardEl.classList.contains('auto-flip')) {
                    flashcardEl.classList.add('auto-flip');
                    // After animation ends, set the state to flipped and clean up animation class
                    const inner = flashcardEl.querySelector('.flashcard-inner');
                    inner.addEventListener('animationend', () => {
                        flashcardEl.classList.add('is-flipped');
                        flashcardEl.classList.remove('auto-flip');
                    }, { once: true });
                }
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    observer.observe(flipBtn);
}

document.addEventListener('DOMContentLoaded', () => {
    // initializeSampleFlashcard will be called by auth.js if the user is not logged in
    // or we can call it here if we know auth.js won't.
    // Actually, auth.js handles visibility, but not initialization of specific components.
    // Let's keep a simple check or just call it, as it checks for elements anyway.
    initializeSampleFlashcard();
});

</script>
</body>
</html>
